{"version":3,"sources":["../src/app.js"],"names":["mongoose","Promise","global","connect","devConfig","database","useNewUrlParser","app","PORT","port","use","restRouter","req","res","next","error","Error","message","status","json","listen","console","log"],"mappings":";;AAAA;;;;AACA;;;;AACA;;AACA;;AACA;;;;AAGAA,mBAASC,OAAT,GAAmBC,OAAOD,OAA1B;AACAD,mBAASG,OAAT,gCAA8CC,uBAAUC,QAAxD,EAAoE,EAAEC,iBAAiB,IAAnB,EAApE;;AAEA,IAAMC,MAAM,wBAAZ;AACA,IAAMC,OAAOJ,uBAAUK,IAAvB;;AAEA;AACA,iCAAoBF,GAApB;;AAEAA,IAAIG,GAAJ,CAAQ,MAAR,EAAgBC,iBAAhB;AACAJ,IAAIG,GAAJ,CAAQ,UAACE,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AACxB,QAAMC,QAAQ,IAAIC,KAAJ,CAAU,YAAV,CAAd;AACAD,UAAME,OAAN,GAAgB,gBAAhB;AACAF,UAAMG,MAAN,GAAe,GAAf;AACAJ,SAAKC,KAAL;AACH,CALD;AAMAR,IAAIG,GAAJ,CAAQ,UAACK,KAAD,EAAQH,GAAR,EAAaC,GAAb,EAAkBC,IAAlB,EAA2B;AAC/BD,QAAIK,MAAJ,CAAWH,MAAMG,MAAN,IAAgB,GAA3B;AACA,WAAOL,IAAIM,IAAJ,CAAS;AACZJ,eAAO;AACHE,qBAASF,MAAME;AADZ;AADK,KAAT,CAAP;AAKH,CAPD;;AASAV,IAAIa,MAAJ,CAAWZ,IAAX,EAAiB,YAAM;AACnBa,YAAQC,GAAR,6BAAsCd,IAAtC;AACH,CAFD","file":"app.js","sourcesContent":["import express from 'express';\nimport mongoose from 'mongoose';\nimport { restRouter } from './api/index';\nimport { devConfig } from './config/env/development';\nimport { setGlobalMiddleware } from './api/middlewares/global.middleware';\n\n\nmongoose.Promise = global.Promise;\nmongoose.connect(`mongodb://localhost:27017/${devConfig.database}`, { useNewUrlParser: true });\n\nconst app = express();\nconst PORT = devConfig.port;\n\n//register global middleware\nsetGlobalMiddleware(app);\n\napp.use('/api', restRouter);\napp.use((req, res, next) => {\n    const error = new Error('Not Found!');\n    error.message = 'Invalid Route!'\n    error.status = 404;\n    next(error);\n})\napp.use((error, req, res, next) => {\n    res.status(error.status || 500);\n    return res.json({\n        error: {\n            message: error.message\n        }\n    });\n});\n\napp.listen(PORT, () => {\n    console.log(`server running at port ${PORT}`);\n});"]}